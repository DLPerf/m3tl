---

title: Pre-defined Problems


keywords: fastai
sidebar: home_sidebar



nb_path: "source_nbs/10_predefined_problems_test.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: source_nbs/10_predefined_problems_test.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;CUDA_VISIBLE_DEVICES&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;-1&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports">Imports<a class="anchor-link" href="#Imports"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Utils">Utils<a class="anchor-link" href="#Utils"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_fake_data" class="doc_header"><code>generate_fake_data</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L48" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_fake_data</code>(<strong><code>output_format</code></strong>=<em><code>'list_tuple'</code></em>, <strong><code>label_format</code></strong>=<em><code>'string'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_fake_label_encoder" class="doc_header"><code>create_fake_label_encoder</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L115" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_fake_label_encoder</code>(<strong><code>params</code></strong>, <strong><code>problem</code></strong>:<code>str</code>, <strong><code>mode</code></strong>:<code>str</code>, <strong><code>label_format</code></strong>=<em><code>'string'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Local-problems">Local problems<a class="anchor-link" href="#Local-problems"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_fake_contrastive_learning_fn" class="doc_header"><code>get_fake_contrastive_learning_fn</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L123" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_fake_contrastive_learning_fn</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_fake_cls_fn" class="doc_header"><code>get_weibo_fake_cls_fn</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L136" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_fake_cls_fn</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_fake_ner_fn" class="doc_header"><code>get_weibo_fake_ner_fn</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L150" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_fake_ner_fn</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_pretrain_fn" class="doc_header"><code>get_weibo_pretrain_fn</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L157" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_pretrain_fn</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_fake_multi_cls_fn" class="doc_header"><code>get_weibo_fake_multi_cls_fn</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L164" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_fake_multi_cls_fn</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_masklm" class="doc_header"><code>get_weibo_masklm</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L171" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_masklm</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_premask_mlm" class="doc_header"><code>get_weibo_premask_mlm</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L181" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_premask_mlm</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_fake_regression" class="doc_header"><code>get_weibo_fake_regression</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L190" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_fake_regression</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_weibo_fake_vector_fit" class="doc_header"><code>get_weibo_fake_vector_fit</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/predefined_problems/test_data.py#L197" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_weibo_fake_vector_fit</code>(<strong><code>file_path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">generate_fake_data</span><span class="p">(</span><span class="n">output_format</span><span class="o">=</span><span class="s1">&#39;dict_tuple&#39;</span><span class="p">,</span> <span class="n">label_format</span><span class="o">=</span><span class="s1">&#39;seq_tag_string&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>({&#39;text&#39;: [&#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;,
   &#39;this is a test&#39;],
  &#39;array&#39;: [array([0.49095954, 0.20541639, 0.49262084, 0.87451381, 0.02458258,
          0.65257202, 0.98258836, 0.58114124, 0.58505677, 0.15806585]),
   array([0.44947885, 0.03171102, 0.62730992, 0.7299056 , 0.04007493,
          0.65133139, 0.60520342, 0.15861278, 0.29668022, 0.33993872]),
   array([0.2731397 , 0.01539462, 0.53834935, 0.32880503, 0.53450392,
          0.76220641, 0.44569313, 0.78168369, 0.54579642, 0.71716377]),
   array([0.12633738, 0.75136335, 0.32964124, 0.64901069, 0.09048094,
          0.96317688, 0.47199601, 0.45125637, 0.53099414, 0.51856527]),
   array([0.75426461, 0.76001104, 0.22953306, 0.9394916 , 0.37764847,
          0.50555047, 0.93132036, 0.47237353, 0.48608123, 0.0177382 ]),
   array([0.4976838 , 0.06866748, 0.37725227, 0.12630836, 0.23961906,
          0.21206261, 0.60618255, 0.49934502, 0.28125586, 0.98571187]),
   array([0.48514133, 0.24224251, 0.88660613, 0.55056173, 0.4166745 ,
          0.09398377, 0.46331419, 0.35790425, 0.53340011, 0.50248541]),
   array([0.37552715, 0.22720832, 0.5789555 , 0.60622229, 0.29577143,
          0.52823125, 0.74576145, 0.22046372, 0.67712443, 0.06888701]),
   array([0.07969023, 0.81459337, 0.011728  , 0.23679496, 0.18646781,
          0.22561861, 0.89018834, 0.234746  , 0.36101215, 0.19218532]),
   array([0.19514571, 0.74129395, 0.10188232, 0.13237138, 0.5208849 ,
          0.24629547, 0.86091529, 0.09563499, 0.59220658, 0.58684688])],
  &#39;cate&#39;: [&#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;,
   &#39;fake_cate&#39;]},
 [[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
  [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Pyspark-Problems">Pyspark Problems<a class="anchor-link" href="#Pyspark-Problems"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="preprocessing_fn.<locals>.wrapper" class="doc_header"><code>preprocessing_fn.<locals>.wrapper</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/preproc_decorator.py#L194" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>preprocessing_fn.<locals>.wrapper</code>(<strong><code>params</code></strong>, <strong><code>mode</code></strong>, <strong><code>get_data_num</code></strong>=<em><code>False</code></em>, <strong><code>write_tfrecord</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="preprocessing_fn.<locals>.wrapper" class="doc_header"><code>preprocessing_fn.<locals>.wrapper</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/preproc_decorator.py#L194" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>preprocessing_fn.<locals>.wrapper</code>(<strong><code>params</code></strong>, <strong><code>mode</code></strong>, <strong><code>get_data_num</code></strong>=<em><code>False</code></em>, <strong><code>write_tfrecord</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="preprocessing_fn.<locals>.wrapper" class="doc_header"><code>preprocessing_fn.<locals>.wrapper</code><a href="https://github.com/JayYip/m3tl/tree/master/m3tl/preproc_decorator.py#L194" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>preprocessing_fn.<locals>.wrapper</code>(<strong><code>params</code></strong>, <strong><code>mode</code></strong>, <strong><code>get_data_num</code></strong>=<em><code>False</code></em>, <strong><code>write_tfrecord</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

